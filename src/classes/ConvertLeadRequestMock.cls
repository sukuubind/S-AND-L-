@isTest
global class ConvertLeadRequestMock implements WebServiceMock {
   global void doInvoke(
           Object stub,
           Object request,
           Map<String, Object> response,
           String endpoint,
           String soapAction,
           String requestName,
           String responseNS,
           String responseName,
           String responseType) {
           
            RecordType rt1 = [Select r.Name, r.Id From RecordType r where r.Name = 'SRP Academic Institution' limit 1];
	        RecordType rt2 = [Select r.Name, r.Id From RecordType r where r.Name = 'SRP Lead' limit 1];
	        RecordType rt3 = [Select r.Name, r.Id From RecordType r where r.Name = 'SRP Opportunity' limit 1];
	        RecordType rt4 = [Select r.Name, r.Id From RecordType r where r.Name = 'SRP Student' limit 1];
	        
	        
	        Account a = new Account();
	        a.recordTypeid = rt1.Id;
	        a.Abbreviation__c = 'TAC';
	        a.name = 'test account';
	        insert a;
        
	        contact c = new Contact();
	        c.FirstName = 'fname';
	        c.LastName = 'lname';
	        c.Email = 'testemail@salesforce.com';
	        c.Phone = '1234567890';
	        c.AccountId = a.Id;
	        c.RecordTypeId = rt4.Id;
	        insert c;
	        
	        DeltakSRP__Academic_Program__c ap = new DeltakSRP__Academic_Program__c();
	        ap.Name = 'abcd';
	        ap.DeltakSRP__School__c = a.id;
	        ap.DeltakSRP__Degree_Type__c = 'Certificate';
	        ap.DeltakSRP__Abbrev__c = 'CID';
	        ap.DeltakSRP__Program_Title__c = 'Certificate in CS';
	        insert ap;
	        
	       Opportunity o2 = new Opportunity();
	        o2.RecordTypeId = rt3.Id;
	        o2.Name = 'Test Opportunity';
	        o2.StageName = 'New Inquiry';
	        o2.CloseDate = system.today()+100;
	        o2.DeltakSRP__Student__c = c.Id;
	        o2.Student__c = c.Id;
	        o2.DeltakSRP__Lead_Source_ID__c = '12345';
	        o2.DeltakSRP__Academic_Program__c = ap.Id;
	        o2.AccountId = a.Id;
	        insert o2;
        
        
        RFI_to_Academic_Programs_Code__c rapc = new RFI_to_Academic_Programs_Code__c();
        rapc.Academic_Program__c = ap.Id;
        rapc.Program_Code__c = 'MSCS';
        insert rapc;
           	
           List<partnerSoapSforceCom.LeadConvertResult> responseElement = new List<partnerSoapSforceCom.LeadConvertResult>();
           partnerSoapSforceCom.LeadConvertResult res = new partnerSoapSforceCom.LeadConvertResult();
           res.success = true;
           res.opportunityid = o2.id;
           responseElement.add(res);
           //Map<String, Object> response,
        // Create response element from the autogenerated class.
        // Populate response element.
        // Add response element to the response parameter, as follows:
          response.put('response_x', responseElement); 
   }
}